{
  "name": "advanced-data-table",
  "type": "registry:ui",
  "dependencies": [
    "@tanstack/react-table",
    "lucide-react"
  ],
  "registryDependencies": [
    "button",
    "dropdown-menu",
    "table",
    "tooltip"
  ],
  "files": [
    {
      "path": "ui/advanced-data-table.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport {\n  ColumnDef,\n  Column,\n  flexRender,\n  getCoreRowModel,\n  getPaginationRowModel,\n  getSortedRowModel,\n  SortingState,\n  useReactTable,\n} from \"@tanstack/react-table\";\nimport { MoreVertical, ChevronLeft, ChevronRight } from \"lucide-react\";\n\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\n\n// --- Types ---\n\nexport type ColumnConfig<TData> = {\n  key: keyof TData;\n  label: string;\n  type: \"string\" | \"number\";\n  enableSorting?: boolean;\n  width?: number;\n};\n\ninterface AdvancedDataTableProps<TData> {\n  data: TData[];\n  columns: ColumnConfig<TData>[];\n  defaultPageSize?: number;\n}\n\n// --- Internal Helper Components ---\n\nconst HeaderWithType = <TData,>({\n  column,\n  type,\n  text,\n}: {\n  column: Column<TData, unknown>;\n  type: \"string\" | \"number\";\n  text: string;\n}) => {\n  const [open, setOpen] = React.useState(false);\n\n  return (\n    <div className=\"group flex items-center w-full gap-1.5\">\n      {/* Left content */}\n      <span className=\"text-[10px] uppercase text-muted-foreground/70 font-mono tracking-tighter\">\n        {type === \"number\" ? \"123\" : \"ABC\"}\n      </span>\n\n      <span className=\"font-medium text-muted-foreground truncate\">{text}</span>\n\n      {/* Right menu */}\n      <DropdownMenu open={open} onOpenChange={setOpen}>\n        <DropdownMenuTrigger asChild>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"\n              h-6 w-6 p-0 ml-auto\n              opacity-0\n              group-hover:opacity-100\n              transition-opacity\n              data-[state=open]:opacity-100\n            \"\n          >\n            <span className=\"sr-only\">Open menu</span>\n            <MoreVertical className=\"h-3 w-3\" />\n          </Button>\n        </DropdownMenuTrigger>\n\n        <DropdownMenuContent\n          align=\"end\"\n          side=\"bottom\"\n          className=\"w-40\"\n          onMouseEnter={() => setOpen(true)}\n          onMouseLeave={() => setOpen(false)}\n        >\n          <DropdownMenuItem\n            onClick={() => column.toggleSorting(false)}\n            className={column.getIsSorted() === \"asc\" ? \"bg-accent\" : \"\"}\n          >\n            Sort Ascending\n          </DropdownMenuItem>\n\n          <DropdownMenuItem\n            onClick={() => column.toggleSorting(true)}\n            className={column.getIsSorted() === \"desc\" ? \"bg-accent\" : \"\"}\n          >\n            Sort Descending\n          </DropdownMenuItem>\n        </DropdownMenuContent>\n      </DropdownMenu>\n    </div>\n  );\n};\n\n// --- Main Component ---\n\nexport function AdvancedDataTable<TData>({\n  data,\n  columns: columnConfigs,\n  defaultPageSize = 10,\n}: AdvancedDataTableProps<TData>) {\n  const [sorting, setSorting] = React.useState<SortingState>([]);\n\n  // Convert simple column config to TanStack ColumnDef\n  const tableColumns = React.useMemo<ColumnDef<TData>[]>(() => {\n    // Index Column\n    const indexCol: ColumnDef<TData> = {\n      id: \"index\",\n      header: () => (\n        <div className=\"flex items-center justify-center h-full w-full\">\n          <span className=\"font-medium text-muted-foreground\">#</span>\n        </div>\n      ),\n      cell: ({ row }) => (\n        <div className=\"text-center font-medium text-muted-foreground\">\n          {row.index + 1}\n        </div>\n      ),\n      enableSorting: false,\n      size: 50,\n    };\n\n    // Data Columns\n    const dataCols: ColumnDef<TData>[] = columnConfigs.map((col) => ({\n      accessorKey: col.key as string,\n      header: ({ column }) => (\n        <HeaderWithType column={column} type={col.type} text={col.label} />\n      ),\n      enableSorting: col.enableSorting ?? true, // Default to true if not specified\n      size: col.width || 120, // Default width\n      cell: ({ row }) => {\n        const value = row.getValue(col.key as string) as string | number;\n        return (\n          <Tooltip>\n            <TooltipTrigger asChild>\n              <div className=\"truncate w-full\">{value}</div>\n            </TooltipTrigger>\n            <TooltipContent>\n              <p>{value}</p>\n            </TooltipContent>\n          </Tooltip>\n        );\n      },\n    }));\n\n    return [indexCol, ...dataCols];\n  }, [columnConfigs]);\n\n  const table = useReactTable({\n    data,\n    columns: tableColumns,\n    defaultColumn: {\n      size: 120,\n      minSize: 50,\n      maxSize: 500,\n    },\n    getCoreRowModel: getCoreRowModel(),\n    getPaginationRowModel: getPaginationRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    onSortingChange: setSorting,\n    state: {\n      sorting,\n    },\n    initialState: {\n      pagination: {\n        pageSize: defaultPageSize,\n      },\n    },\n  });\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"rounded-md border overflow-x-auto bg-background\">\n        <TooltipProvider>\n          <Table className=\"table-fixed w-max min-w-full border-collapse border border-border\">\n            <TableHeader>\n              {table.getHeaderGroups().map((headerGroup) => (\n                <TableRow key={headerGroup.id}>\n                  {headerGroup.headers.map((header) => (\n                    <TableHead\n                      key={header.id}\n                      className=\"h-9 px-2 border-r border-b border-border text-xs bg-muted/30\"\n                      style={{ width: header.getSize() }}\n                    >\n                      {header.isPlaceholder\n                        ? null\n                        : flexRender(\n                            header.column.columnDef.header,\n                            header.getContext(),\n                          )}\n                    </TableHead>\n                  ))}\n                </TableRow>\n              ))}\n            </TableHeader>\n\n            <TableBody>\n              {table.getRowModel().rows?.length ? (\n                table.getRowModel().rows.map((row) => (\n                  <TableRow\n                    key={row.id}\n                    data-state={row.getIsSelected() && \"selected\"}\n                  >\n                    {row.getVisibleCells().map((cell) => (\n                      <TableCell\n                        key={cell.id}\n                        className=\"h-9 px-2 border-r border-b border-border text-xs p-0 [&>div]:px-2 [&>div]:flex [&>div]:items-center [&>div]:h-full\"\n                        style={{ width: cell.column.getSize() }}\n                      >\n                        <div style={{ width: cell.column.getSize() }}>\n                          {flexRender(\n                            cell.column.columnDef.cell,\n                            cell.getContext(),\n                          )}\n                        </div>\n                      </TableCell>\n                    ))}\n                  </TableRow>\n                ))\n              ) : (\n                <TableRow>\n                  <TableCell\n                    colSpan={tableColumns.length}\n                    className=\"h-24 text-center\"\n                  >\n                    No results.\n                  </TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </TooltipProvider>\n      </div>\n\n      {/* Pagination */}\n      <div className=\"flex items-center justify-between px-2\">\n        <div className=\"text-xs text-muted-foreground\">\n          Page {table.getState().pagination.pageIndex + 1} of{\" \"}\n          {table.getPageCount()}\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => table.previousPage()}\n            disabled={!table.getCanPreviousPage()}\n            className=\"h-8 w-8 p-0\"\n          >\n            <ChevronLeft className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => table.nextPage()}\n            disabled={!table.getCanNextPage()}\n            className=\"h-8 w-8 p-0\"\n          >\n            <ChevronRight className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:ui"
    }
  ]
}
